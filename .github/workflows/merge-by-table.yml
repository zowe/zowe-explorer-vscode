name: Merge-by

on:
    pull_request:
      types: [opened, ready_for_review]
    push:
      branches:
        - main
        - next
    workflow_dispatch:
    schedule:
    - cron: "0 11 * * *"
jobs:
    rfr_add_date:
        name: "Build table and notify users"
        runs-on: ubuntu-22.04
        permissions:
            discussions: write
            pull-requests: write
        steps:
            - uses: actions/checkout@v3
            - uses: actions/setup-node@v4
              with:
                node-version: 20
                cache: 'yarn'
            - run: yarn --ignore-scripts
            - uses: actions/github-script@v7
              with:
                script: |
                    const script = require("./.github/workflows/merge-by/build-table-and-notify.js");
                    await script({ github, context });
